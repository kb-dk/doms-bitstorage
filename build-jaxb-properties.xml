<project name="properties">

    <path id="jaxws.classpath">
        <fileset dir="${global.dir}/lib/jaxws-ri-2.1.7/jars">
            <include name="*.jar"/>
        </fileset>
    </path>


    <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
        <classpath refid="jaxws.classpath"/>
    </taskdef>

    <property name="propertiesjar" value="properties.jar"/>
    <property name="propertiessrcpack.zip" value="propertiessrc.zip"/>


    <target name="properties.init">
        <mkdir dir="classes"/>
        <mkdir dir="tempsrc"/>
    </target>

    <target name="properties.clean">
        <delete dir="classes"/>
        <delete dir="tempsrc"/>
    </target>


    <target name="properties.generate" depends="properties.init">
        <xjc schema="${config.xsd}" destdir="tempsrc"
             package="${properties.package}"/>
    </target>


    <target name="properties.compile" depends="properties.generate">
        <javac source="1.6" destdir="classes" debug="on"
               encoding="UTF-8">
            <src path="tempsrc"/>
            <classpath refid="build.classpath"/>
        </javac>
    </target>


    <target name="properties.jar" depends="properties.compile">

        <mkdir dir="dist"/>

        <jar destfile="dist/${propertiesjar}"
             basedir="classes"/>

    </target>


    <target name="properties.sourcezip" depends="properties.generate">
        <mkdir dir="dist"/>

        <zip destfile="dist/${propertiessrcpack.zip}">
            <zipfileset dir="tempsrc">
                <include name="**/*.java"/>
            </zipfileset>
        </zip>
    </target>

    <target name="properties.addtolib"
            depends="properties.clean,properties.jar,properties.sourcezip">
        <copy file="dist/${propertiesjar}" todir="lib/properties/jars"
              overwrite="true"/>
        <copy file="dist/${propertiessrcpack.zip}" todir="lib/properties/src"
              overwrite="true"/>
    </target>


</project>